(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-speednet-myspeed-detail"],{5558:function(e,t,n){"use strict";(function(e){var a=n("4ea4");n("e25e"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var i=a(n("1da1")),s=a(n("5530")),r=(n("7b9a"),a(n("2ac7"))),o=n("26cb"),l=e.database(),c={data:function(){return{speedBtn:"启动加速",sm_anim:"",net_delay:22,faster:83,loss:2,progress:"",duration:3,queryWhere:"",clock:{},remaining:0,processes:"",loadingCssObject:{"loading-css":!0,"loading-css-run":!1},smLoadingCssObject:{"sm-loading-css":!0,"sm-loading-css-run":!1},smSmStyleObject:{},smTextStyleObject:{},startStatus:!1,autoSpeed:!1,viewStartStatus:!1}},computed:(0,s.default)({},(0,o.mapGetters)({speedInfo:"user/speedInfo",globalSpeedStatus:"user/globalSpeedStatus"})),onLoad:function(e){this.userId=this.userInfo()._id,console.log("userid getted:"+JSON.stringify(this.userId)),this.gameName=e.name,this.gameId=e.id,this.processes=e.processes,this.peerId=e.peer_id,this.peerName=e.peer_name,this.picurl=e.picurl,this.smSmStyleObject={backgroundImage:"url("+this.picurl+")"},console.log("e.autoSpeed:",e.autoSpeed,typeof e.autoSpeed),"true"==e.autoSpeed&&(this.autoSpeed=!0),console.log("this.autoSpeed:",this.autoSpeed)},onBackPress:function(){return uni.switchTab({url:"/pages/list/list"}),!0},onReady:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e._id&&(e.queryWhere='_id=="'+e._id+'"'),uni.setNavigationBarTitle({title:e.gameName}),t.next=4,e.getRativeStatus();case 4:if(n=t.sent,"running"!=n){t.next=9;break}e.setViewStartedStatus(),t.next=12;break;case 9:if(1!=e.autoSpeed){t.next=12;break}return t.next=12,e.startSpeed();case 12:case"end":return t.stop()}}),t)})))()},onShow:function(){return(0,i.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:(0,s.default)((0,s.default)({getRativeStatus:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.get("http://127.0.0.1:9090").then((function(e){var t=e.status;console.log("corevpn status:",JSON.stringify(t)),200==t?uni.setStorageSync("globalSpeedStatus","running"):uni.setStorageSync("globalSpeedStatus","stoped")})).catch((function(e){uni.setStorageSync("globalSpeedStatus","stoped")}));case 2:return console.log(" uni.getStorageSync -------------",uni.getStorageSync("globalSpeedStatus")),t.abrupt("return",uni.getStorageSync("globalSpeedStatus"));case 4:case"end":return t.stop()}}),t)})))()},randomNum:function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}}},(0,o.mapGetters)({userInfo:"user/info"})),{},{stepNumber:function(e,t,n,a){var i=this,s=setInterval((function(){e+=t,i.progress=e+"%",e>n&&(clearInterval(s),i.progress=n+"%",s=null)}),1e3*a/(n-e))},startSpeed:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a,i,s,r,o,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("启动加速"!=t.speedBtn){n.next=50;break}return n.prev=1,t.setViewStartingStatus(),a=e.importObject("membership"),n.next=6,a.getMembership(t.userId);case 6:if(i=n.sent,console.log("membership:",JSON.stringify(i)),""!=i){n.next=12;break}uni.showModal({title:"提示",content:"会员时长不足，请先购买订阅",showCancel:!1,confirmText:"知道了",complete:function(){uni.reLaunch({url:"/pages/speednet-membership/memberCenter"})}}),n.next=43;break;case 12:if(!i.is_pause){n.next=16;break}uni.showModal({title:"提示",content:"您的加速已暂停，请先恢复加速",showCancel:!1,confirmText:"知道了",complete:function(){uni.reLaunch({url:"/pages/speednet-membership/memberCenter"})}}),n.next=43;break;case 16:if(0!=i.remaining_minites){n.next=21;break}uni.showModal({title:"提示",content:"会员时长不足，请先购买订阅",showCancel:!1,confirmText:"知道了",complete:function(){uni.reLaunch({url:"/pages/speednet-membership/memberCenter"})}}),t.progress=0,n.next=43;break;case 21:return n.next=23,t.getRativeStatus();case 23:if(s=n.sent,1!=s){n.next=27;break}return console.log("已经启动corevpn，点击加速无效，直接返回！"),n.abrupt("return");case 27:return t.remaining=i.remaining_minites,console.log("----------------------------this.remaining:"+t.remaining),n.next=31,l.collection("speednet-peer").where('_id=="'+t.peerId+'"').get();case 31:r=n.sent,o=r.result.data,o[0].processes=t.processes,o[0].remaining=i.remaining_minites,c={gameName:t.gameName,gameId:t.gameId,processes:t.processes,peerId:t.peerId,peerName:t.peerName,picurl:t.picurl},uni.setStorageSync("lastSpeed",c),window.electronAPI.startVpn(o),t.setSpeedInfoStorage(),uni.setStorageSync("globalSpeedStatus","running"),t.setViewStartedStatus(),uni.showToast({title:"启动成功",icon:"error"}),t.speedBtn="停止加速";case 43:n.next=48;break;case 45:throw n.prev=45,n.t0=n["catch"](1),n.t0;case 48:n.next=51;break;case 50:t.stopAll();case 51:case"end":return n.stop()}}),n,null,[[1,45]])})))()},stopAll:function(){window.electronAPI.stopVpn(event),uni.showToast({title:"停止成功",icon:"error"}),this.setViewStopStatus(),this.setSpeedInfoStorage()},setSpeedInfoStorage:function(){var e=[{gameId:this.gameId,gameName:this.gameName,processes:this.processes,peerId:this.peerId,peerName:this.peerName,picurl:this.picurl,start_date:Date()}],t={gameId:this.gameId,gameName:this.gameName,peerId:this.peerId,peerName:this.peerName,picurl:this.picurl,start_date:Date()},n={hasStarted:!1,mySpeedList:e,runningGameId:this.gameId,runningGame:t};r.default.commit("user/startSpeed",n)},setViewStartingStatus:function(){this.speedBtn="正在启动加速",this.loadingCssObject={"loading-css-run":!0,"loading-css":!1},this.smLoadingCssObject={"sm-loading-css":!1,"sm-loading-css-run":!0},this.smSmStyleObject={backgroundImage:""},this.smTextStyleObject={display:"block"},this.stepNumber(0,2,100,5)},setViewStartedStatus:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(1!=t.viewStartStatus){n.next=2;break}return n.abrupt("return");case 2:return a=e.importObject("membership"),n.next=5,a.getMembership(t.userId);case 5:i=n.sent,console.log("membership:",JSON.stringify(i)),""==i?uni.showModal({title:"提示",content:"会员时长不足，请先购买订阅",showCancel:!1,confirmText:"知道了",complete:function(){uni.reLaunch({url:"/pages/speednet-membership/memberCenter"})}}):i.is_pause?uni.showModal({title:"提示",content:"您的加速已暂停，请先恢复加速",showCancel:!1,confirmText:"知道了",complete:function(){uni.reLaunch({url:"/pages/speednet-membership/memberCenter"})}}):i.remaining_minites<=0?uni.showModal({title:"提示",content:"会员时长不足，请先购买订阅",showCancel:!1,confirmText:"知道了",complete:function(){uni.reLaunch({url:"/pages/speednet-membership/memberCenter"})}}):(t.remaining=i.remaining_minites,t.loadingCssObject={"loading-css-run":!0,"loading-css":!1},t.smLoadingCssObject={"sm-loading-css":!1,"sm-loading-css-run":!0},t.smSmStyleObject={backgroundImage:""},t.smTextStyleObject={display:"block"},t.progress="100%",t.net_delay=t.randomNum(4,48),t.loss=t.randomNum(2,9),t.faster=t.randomNum(80,99),console.log("start interval:"+t.remaining),t.clock=setInterval((function(){console.log("this.remaining in interval:"+t.remaining),t.remaining--,t.remaining<=0&&(t.stopAll(),uni.showModal({title:"提示",content:"会员时长不足，请先购买订阅",showCancel:!1,confirmText:"知道了",complete:function(){}}),clearInterval(t.clock))}),6e4),t.viewStartStatus=!0,t.speedBtn="停止加速");case 8:case"end":return n.stop()}}),n)})))()},setViewStopStatus:function(){clearInterval(this.clock),this.speedBtn="启动加速",this.loadingCssObject={"loading-css-run":!1,"loading-css":!0},this.smLoadingCssObject={"sm-loading-css":!0,"sm-loading-css-run":!1},this.smSmStyleObject={backgroundImage:"url("+this.picurl+")"},this.smTextStyleObject={display:"none"},this.stepNumber(0,2,100,5)},showPeers:function(e){var t=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a,i,s,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.mypeerList=[],n.next=3,l.collection("speednet-peer").where('region_id=="'+e+'"').field("_id,peer_name,server").get();case 3:for(a=n.sent,i=0;i<a.result.data.length;i++)for(s=0;s<25;s++)r=a.result.data[i],console.log(r),o={peer_name:s,_id:"ddd"},t.mypeerList.push(o);t.chooseRegion=e,t.$refs.pop.show();case 7:case"end":return n.stop()}}),n)})))()}})};t.default=c}).call(this,n("a9ff")["default"])},"666d":function(e,t,n){"use strict";var a=n("763a"),i=n.n(a);i.a},"675c":function(e,t,n){"use strict";n.r(t);var a=n("5558"),i=n.n(a);for(var s in a)"default"!==s&&function(e){n.d(t,e,(function(){return a[e]}))}(s);t["default"]=i.a},"6cce":function(e,t,n){"use strict";n.r(t);var a=n("e1ce"),i=n("675c");for(var s in i)"default"!==s&&function(e){n.d(t,e,(function(){return i[e]}))}(s);n("666d");var r,o=n("f0c5"),l=Object(o["a"])(i["default"],a["b"],a["c"],!1,null,"7e494f8c",null,!1,a["a"],r);t["default"]=l.exports},"763a":function(e,t,n){var a=n("f77b");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("75f9363e",a,!0,{sourceMap:!1,shadowMode:!1})},e1ce:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return a}));var a={uniRow:n("e564").default,uniCol:n("479d").default,uniIcons:n("492a").default},i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"circle-wrapper"},[n("div",{ref:"sm_sm_loading",staticClass:"sm-sm-loading-css",style:e.smSmStyleObject},[n("v-uni-text",{ref:"loading_text",style:e.smTextStyleObject},[e._v(e._s(this.progress))])],1),n("div",{ref:"md_loading",staticClass:"md-loading-css"}),n("div",{ref:"sm_loading",class:e.smLoadingCssObject}),n("div",{ref:"loading",class:e.loadingCssObject})]),n("v-uni-view",{staticClass:"btns",attrs:{"hover-class":"hover"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.startSpeed.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"button-text"},[e._v(e._s(e.speedBtn))])],1),n("uni-row",{staticClass:"b-title-row"},[n("uni-col",{staticClass:"data-col",attrs:{span:8}},[n("v-uni-view",{staticClass:" b-col"},[n("uni-icons",{attrs:{type:"map-pin-ellipse"}}),n("v-uni-text",{staticClass:"b-title"},[e._v("网络延迟")])],1)],1),n("uni-col",{staticClass:"data-col",attrs:{span:8}},[n("v-uni-view",{staticClass:" b-col"},[n("uni-icons",{attrs:{type:"map-pin-ellipse"}}),n("v-uni-text",{staticClass:"b-title"},[e._v("综合提速")])],1)],1),n("uni-col",{staticClass:"data-col",attrs:{span:8}},[n("v-uni-view",{staticClass:" b-col"},[n("uni-icons",{attrs:{type:"map-pin-ellipse"}}),n("v-uni-text",{staticClass:"b-title"},[e._v("丢包率")])],1)],1)],1),n("uni-row",{staticClass:"b-data-row"},[n("uni-col",{staticClass:"data-col",attrs:{span:7,push:1}},[n("v-uni-view",{staticClass:" b-col"},[n("p",{staticClass:"number"},[e._v(e._s(e.net_delay))]),n("p",{staticClass:"b-title"},[e._v("ms")])])],1),n("uni-col",{staticClass:"data-col",attrs:{span:1,push:1}},[n("v-uni-view",{staticClass:" b-col"},[n("p",{staticClass:"number"},[e._v("|")]),n("p",{staticClass:"b-title"},[e._v("|")])])],1),n("uni-col",{staticClass:"data-col",attrs:{span:7,push:1}},[n("v-uni-view",{staticClass:" b-col"},[n("p",{staticClass:"number"},[e._v(e._s(e.faster))]),n("p",{staticClass:"b-title"},[e._v("%")])])],1),n("uni-col",{staticClass:"data-col",attrs:{span:1,push:1}},[n("v-uni-view",{staticClass:" b-col"},[n("p",{staticClass:"number"},[e._v("|")]),n("p",{staticClass:"b-title"},[e._v("|")])])],1),n("uni-col",{staticClass:"data-col",attrs:{span:7,push:1}},[n("v-uni-view",{staticClass:" b-col"},[n("p",{staticClass:"number"},[e._v(e._s(e.loss))]),n("p",{staticClass:"b-title"},[e._v("%")])])],1)],1)],1)},s=[]},f77b:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,"@-webkit-keyframes loading-360-data-v-7e494f8c{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)\n\t\t/*动画起始的时候旋转了0度*/}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)\n\t\t/*动画结束的时候旋转了360度*/}}@keyframes loading-360-data-v-7e494f8c{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)\n\t\t/*动画起始的时候旋转了0度*/}100%{-webkit-transform:rotate(1turn);transform:rotate(1turn)\n\t\t/*动画结束的时候旋转了360度*/}}@-webkit-keyframes r-loading-360-data-v-7e494f8c{0%{-webkit-transform:rotate(1turn);transform:rotate(1turn)\n\t\t/*动画起始的时候旋转了0度*/}100%{-webkit-transform:rotate(0deg);transform:rotate(0deg)\n\t\t/*动画结束的时候旋转了360度*/}}@keyframes r-loading-360-data-v-7e494f8c{0%{-webkit-transform:rotate(1turn);transform:rotate(1turn)\n\t\t/*动画起始的时候旋转了0度*/}100%{-webkit-transform:rotate(0deg);transform:rotate(0deg)\n\t\t/*动画结束的时候旋转了360度*/}}.loading-css[data-v-7e494f8c]{-webkit-animation:loading-360-data-v-7e494f8c 3s infinite linear;animation:loading-360-data-v-7e494f8c 3s infinite linear;-webkit-animation-play-state:paused;animation-play-state:paused;\n\t/*给圆环添加旋转360度的动画，并且是无限次*/width:200px;\n\t/*先将loading区域变成正方形*/height:200px;\n\t/* display: inline-block; */\n\t/*将loading区域变成行内元素，防止旋转的时候，100%宽度都在旋转*/border:3px solid #f3f3f3;\n\t/*设置四周边框大小，并将颜色设置为浅白色*/border-top:3px solid red;\n\t/*将上边框颜色设置为红色高亮，以便旋转的时候能够看到旋转的效果*/border-radius:50%;\n\t/*将边框和内容区域都变成圆形*/position:absolute;top:50%;left:50%;margin-top:-100px;margin-left:-100px}.loading-css-run[data-v-7e494f8c]{-webkit-animation:loading-360-data-v-7e494f8c 3s infinite linear;animation:loading-360-data-v-7e494f8c 3s infinite linear;-webkit-animation-play-state:running;animation-play-state:running;\n\t/*给圆环添加旋转360度的动画，并且是无限次*/width:200px;\n\t/*先将loading区域变成正方形*/height:200px;\n\t/* display: inline-block; */\n\t/*将loading区域变成行内元素，防止旋转的时候，100%宽度都在旋转*/border:3px solid #f3f3f3;\n\t/*设置四周边框大小，并将颜色设置为浅白色*/border-top:3px solid red;\n\t/*将上边框颜色设置为红色高亮，以便旋转的时候能够看到旋转的效果*/border-radius:50%;\n\t/*将边框和内容区域都变成圆形*/position:absolute;top:50%;left:50%;margin-top:-100px;margin-left:-100px}.sm-loading-css[data-v-7e494f8c]{-webkit-animation:r-loading-360-data-v-7e494f8c 2s infinite linear;animation:r-loading-360-data-v-7e494f8c 2s infinite linear;-webkit-animation-play-state:paused;animation-play-state:paused;\n\t/*给圆环添加旋转360度的动画，并且是无限次*/width:180px;\n\t/*先将loading区域变成正方形*/height:180px;\n\t/* display: inline-block; */\n\t/*将loading区域变成行内元素，防止旋转的时候，100%宽度都在旋转*/border:2px solid #f3f3f3;\n\t/*设置四周边框大小，并将颜色设置为浅白色*/border-top:2px solid red;\n\t/*将上边框颜色设置为红色高亮，以便旋转的时候能够看到旋转的效果*/border-radius:50%;\n\t/*将边框和内容区域都变成圆形*/position:absolute;top:50%;left:50%;margin-top:-90px;margin-left:-90px}.sm-loading-css-run[data-v-7e494f8c]{-webkit-animation:r-loading-360-data-v-7e494f8c 2s infinite linear;animation:r-loading-360-data-v-7e494f8c 2s infinite linear;-webkit-animation-play-state:running;animation-play-state:running;\n\t/*给圆环添加旋转360度的动画，并且是无限次*/width:180px;\n\t/*先将loading区域变成正方形*/height:180px;\n\t/* display: inline-block; */\n\t/*将loading区域变成行内元素，防止旋转的时候，100%宽度都在旋转*/border:2px solid #f3f3f3;\n\t/*设置四周边框大小，并将颜色设置为浅白色*/border-top:2px solid red;\n\t/*将上边框颜色设置为红色高亮，以便旋转的时候能够看到旋转的效果*/border-radius:50%;\n\t/*将边框和内容区域都变成圆形*/position:absolute;top:50%;left:50%;margin-top:-90px;margin-left:-90px}.circle-wrapper[data-v-7e494f8c]{\n\t/* background-color: chocolate; */width:100%;height:230px;position:relative;text-align:center;margin-top:20px}.sm-sm-loading-css[data-v-7e494f8c]{\n\t/* animation: r-loading-360 0.8s infinite linear; */\n\t/*给圆环添加旋转360度的动画，并且是无限次*/width:100px;\n\t/*先将loading区域变成正方形*/height:100px;\n\t/* display: inline-block; */\n\t/*将loading区域变成行内元素，防止旋转的时候，100%宽度都在旋转*/border:2px solid #f3f3f3;\n\t/*设置四周边框大小，并将颜色设置为浅白色*/\n\t/* border-top: 3px solid red; */\n\t/*将上边框颜色设置为红色高亮，以便旋转的时候能够看到旋转的效果*/border-radius:50%;\n\t/*将边框和内容区域都变成圆形*/position:absolute;top:50%;left:50%;margin-top:-50px;margin-left:-50px;background-size:100%;font-size:30px;text-align:center;line-height:100px;color:#1e90ff}.md-loading-css[data-v-7e494f8c]{\n\t/* animation: r-loading-360 0.8s infinite linear; */\n\t/*给圆环添加旋转360度的动画，并且是无限次*/width:120px;\n\t/*先将loading区域变成正方形*/height:120px;\n\t/* display: inline-block; */\n\t/*将loading区域变成行内元素，防止旋转的时候，100%宽度都在旋转*/border:2px solid #f3f3f3;\n\t/*设置四周边框大小，并将颜色设置为浅白色*/\n\t/* border-top: 3px solid red; */\n\t/*将上边框颜色设置为红色高亮，以便旋转的时候能够看到旋转的效果*/border-radius:50%;\n\t/*将边框和内容区域都变成圆形*/position:absolute;top:50%;left:50%;margin-top:-60px;margin-left:-60px;background-size:100%;font-size:30px;text-align:center;line-height:100px;color:#1e90ff}.region-tag[data-v-7e494f8c]{margin:20px}.data-col[data-v-7e494f8c]{display:flex;align-items:center;flex-direction:column}.b-title-row[data-v-7e494f8c],\n.b-data-row[data-v-7e494f8c]{width:100%;margin-bottom:20px;display:flex;align-items:center;flex-direction:row}.container[data-v-7e494f8c]{padding:10px;display:flex;align-items:center;flex-direction:column\n\t/* \t\theight: 3000px;\n\tbackground-image: url('/static//mybg.jpg'); */}.btns[data-v-7e494f8c]{margin:60px 100px 100px 100px;background-color:#3cb371;display:flex;flex-direction:row;align-items:center;justify-content:center;height:45px;width:250px;border-radius:50px;&-text{font-size:30px\n\t\t/* color: #1C1C1C; */}}\n\n/* \t.btns {\n\tbackground-color: mediumseagreen;\n\tcolor: mediumseagreen;\n\tmargin-top: 50px;\n\tmargin-bottom: 100px;\n\twidth: 200px;\n}\n\n.btns button {\n\tflex: 100;\n} */.btn-delete[data-v-7e494f8c]{margin-left:10px}",""]),e.exports=t}}]);